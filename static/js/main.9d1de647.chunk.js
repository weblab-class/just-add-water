(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},17:function(e,t,a){},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),s=a.n(r),o=(a(17),a(10)),l=a(3),h=a(4),c=a(6),m=a(5),u=a(7),d=a(2),p=a(1),v=a(11),w=a.n(v),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={centerSides:3,centerBottomRadius:0,centerTopRadius:0,centerHeight:.25,centerTranslateZ:.25},a.start=a.start.bind(Object(d.a)(Object(d.a)(a))),a.stop=a.stop.bind(Object(d.a)(Object(d.a)(a))),a.animate=a.animate.bind(Object(d.a)(Object(d.a)(a))),a.renderScene=a.renderScene.bind(Object(d.a)(Object(d.a)(a))),a.computeBoundingBox=a.computeBoundingBox.bind(Object(d.a)(Object(d.a)(a))),a.setupScene=a.setupScene.bind(Object(d.a)(Object(d.a)(a))),a.destroyContext=a.destroyContext.bind(Object(d.a)(Object(d.a)(a))),a.handleWindowResize=a.handleWindowResize.bind(Object(d.a)(Object(d.a)(a))),a.stemRadius=.25,a.stemHeight=15,a.flowerMaterial=new p.MeshLambertMaterial({color:a.props.flowerColor}),a.wireMaterial=new p.MeshBasicMaterial({color:16711680,wireframe:!0}),a.leafMaterial=new p.MeshLambertMaterial({color:a.props.leafStemColor,flatshading:!0}),a.centerMaterial=new p.MeshLambertMaterial({color:"#ffe600",flatshading:!0}),a.stemMaterial=new p.MeshBasicMaterial({color:a.props.leafStemColor}),a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentDidMount",value:function(){this.setupScene()}},{key:"componentDidUpdate",value:function(){console.log("redrawing..."),this.redraw()}},{key:"petalGeometry",value:function(e,t,a,n,i,r,s){var o=e+a*n,l=t+a*i,h=t+a*s,c=e+a*r,m=new p.Shape;return m.bezierCurveTo(o,l,c,h,a,t),m.bezierCurveTo(c,-h,o,-l,e,t),new p.ShapeGeometry(m)}},{key:"flowerGeometry",value:function(e,t,a,n,i,r,s){for(var o=new p.Geometry,l=0;l<e;l++){var h=this.petalGeometry(0,0,t,a,n,i,r);h.rotateY(-s);var c=2*Math.PI/e;h.rotateZ(c*l),o.merge(h)}return o}},{key:"addFlowerMesh",value:function(){var e=this.flowerGeometry(this.props.numPetals,this.props.petalLength,this.props.petalInnerXRelative,this.props.petalInnerYRelative,this.props.petalOuterXRelative,this.props.petalOuterYRelative,this.props.petalPitch);this.flowerMesh=new p.Mesh(e,this.flowerMaterial),this.scene.add(this.flowerMesh),console.log("number of petals="+JSON.stringify(this.props.numPetals)),console.log("flower rendered")}},{key:"removeMesh",value:function(e){e.geometry.dispose(),e.material.dispose(),this.scene.remove(e)}},{key:"redraw",value:function(){this.removeMesh(this.flowerMesh),this.addFlowerMesh()}},{key:"leafGeometry",value:function(e,t,a,n,i,r){var s=n,o=i,l=a,h=new p.Shape;h.bezierCurveTo(e+0,t+s,e+l,t+o,a,t);var c=new p.ShapeGeometry(h),m=new p.Shape;m.bezierCurveTo(e+0,t-s,e+l,t-o,a,t);var u=new p.ShapeGeometry(m);return c.rotateX(r),u.rotateX(-r),u.merge(c),u}},{key:"setupScene",value:function(){this.width=this.container.clientWidth,this.height=this.container.clientHeight;var e=new p.WebGLRenderer({antialias:!0});e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.gammaOutput=!0,e.gammaFactor=2.2,e.shadowMap.type=p.PCFSoftShadowMap,this.scene=new p.Scene,this.scene.background=new p.Color("white");var t=new p.PerspectiveCamera(60,this.width/this.height,.25,1e3);this.scene.add(t),this.addFlowerMesh();var a=new p.CylinderGeometry(this.state.centerTopRadius,this.state.centerBottomRadius,this.state.centerHeight,this.state.centerSides);a.rotateX(.5*Math.PI);var n=new p.Mesh(a,this.centerMaterial);n.translateOnAxis(new p.Vector3(0,0,1),this.state.centerTranslateZ),this.scene.add(n);var i=new p.CylinderGeometry(this.stemRadius,this.stemRadius,this.stemHeight,3);i.rotateX(.5*Math.PI);var r=new p.Mesh(i,this.stemMaterial);r.translateOnAxis(new p.Vector3(0,0,-1),.5*this.stemHeight),this.scene.add(r);for(var s=Math.PI/180*120,o=Math.PI/180*20,l=Math.PI/180*30,h=.5*-this.stemHeight,c=.9*-this.stemHeight,m=0;c<h&&c<0;m++){c+=3;var u=this.leafGeometry(0,0,10,2,-1,o);u.rotateY(-l),u.rotateZ(m*s);var d=new p.Mesh(u,this.leafMaterial);d.translateOnAxis(new p.Vector3(0,0,1),c),this.scene.add(d)}this.renderer=e,this.scene=this.scene,this.camera=t;var v=new p.Geometry;v.merge(i),v.merge(this.flowerMesh.geometry);var w=new p.Mesh(v,this.wireMaterial);this.object=w;var g=new p.SpotLight(16777215,.9);g.position.set(10,20,15),t.add(g),this.spotLight=g;var f=new p.AmbientLight(3355443);f.position.set(5,3,5),this.camera.add(f),this.computeBoundingBox()}},{key:"computeBoundingBox",value:function(){var e=new p.Box3;e.setFromObject(this.object);var t=e.getCenter(),a=e.getSize(),n=Math.max(a.x,a.y,a.z),i=this.camera.fov*(Math.PI/180),r=n/2/Math.tan(i/2);r*=1.6,this.camera.position.z=t.z+r;var s=e.min.z,o=s<0?-s+r:r-s;this.camera.far=3*o,this.camera.lookAt(t),this.camera.updateProjectionMatrix();var l=new w.a(this.camera,this.renderer.domElement);l.enableDamping=!0,l.dampingFactor=.25,l.enableZoom=!0,l.zoomSpeed=.1,l.enableKeys=!1,l.screenSpacePanning=!1,l.enableRotate=!0,l.autoRotate=!1,l.dampingFactor=1,l.autoRotateSpeed=1.2,l.enablePan=!1,l.target.set(t.x,t.y,t.z),l.update(),this.controls=l,this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.start()}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"animate",value:function(){this.frameId=requestAnimationFrame(this.animate),this.controls.update(),this.renderScene()}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"handleWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"componentWillUnmount",value:function(){this.stop(),this.destroyContext()}},{key:"destroyContext",value:function(){this.container.removeChild(this.renderer.domElement),this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,this.renderer=null}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:function(t){e.container=t},style:{width:"100%",height:"100%",position:"absolute",overflow:"hidden"}})}}]),t}(n.Component),f=(a(19),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={numPetals:6,petalLength:5,petalPitch:30*Math.PI/180,petalInnerXRelative:0,petalOuterXRelative:1,petalInnerYRelative:.1,petalOuterYRelative:.5,flowerColor:"#24afff",leafStemColor:"#69a339"},a.onChange=a.onChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(h.a)(t,[{key:"onChange",value:function(e){console.log(e),this.setState(Object(o.a)({},e.target.name,parseFloat(e.target.value)))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"inputs"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("label",null,"number of petals"),i.a.createElement("input",{type:"range",name:"numPetals",value:this.state.numPetals,onChange:this.onChange,min:0,max:24,step:1})),i.a.createElement("li",null,i.a.createElement("label",null,"size"),i.a.createElement("input",{type:"range",name:"petalLength",value:this.state.petalLength,onChange:this.onChange,min:0,max:8,step:.1})),i.a.createElement("li",null,i.a.createElement("label",null,"pitch"),i.a.createElement("input",{type:"range",name:"petalPitch",value:this.state.petalPitch,onChange:this.onChange,min:-90*Math.PI/180,max:90*Math.PI/180,step:.01})),i.a.createElement("li",null,i.a.createElement("label",null,"innerX"),i.a.createElement("input",{type:"range",name:"petalInnerXRelative",value:this.state.petalInnerXRelative,onChange:this.onChange,min:0,max:2,step:.1})),i.a.createElement("li",null,i.a.createElement("label",null,"innerY"),i.a.createElement("input",{type:"range",name:"petalInnerYRelative",value:this.state.petalInnerYRelative,onChange:this.onChange,min:-2,max:2,step:.1})),i.a.createElement("li",null,i.a.createElement("label",null,"outerX"),i.a.createElement("input",{type:"range",name:"petalOuterXRelative",value:this.state.petalOuterXRelative,onChange:this.onChange,min:0,max:2,step:.1})),i.a.createElement("li",null,i.a.createElement("label",null,"outerY"),i.a.createElement("input",{type:"range",name:"petalOuterYRelative",value:this.state.petalOuterYRelative,onChange:this.onChange,min:-2,max:2,step:.1})))),i.a.createElement(g,Object.assign({className:"Scene"},this.state)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.9d1de647.chunk.js.map